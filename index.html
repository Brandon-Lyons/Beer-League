<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="css/bootstrap-responsive.css">
	<link rel="stylesheet" type="text/css" href="css/stylesheet.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script src="js/jquery-1.9.1.min.js"></script>
	<script src="js/bootstrap.js"></script>
	<script src="js/jquery.validate.js"></script>
	<script src="js/jquery.tablesorter.min.js"></script> 
	<script>
	$(document).ready(function(){

<<<<<<< HEAD
=======
		//hide team limit alert upon load
		$('.alert').hide();

		//resets form validation on opening.
		$('#create_team').click( function(){
			$('.control-group').removeClass('success error');
			validate.resetForm();
		});


>>>>>>> 15c78c3394511a1f7641e8e8254223446e7282b5
		var validate = $("#modal_form").validate({
			rules: {
			    teamName: {
			      minlength: 2,
			      required: true
				},
			    mgr_fname: {
			      minlength: 2,
			      required: true
				},
			    mgr_lname: {
			      minlength: 2,
			      required: true
				},
			    phone: {
			      digits: true,
			      required: true,
			      rangelength: [10, 10]
				},
			    sponsor: {
			      minlength: 2,
			      required: true
				},
			    zip: {			 
			      digits: true,
			      required: true,
			      rangelength: [5, 5]
				}
			},
			highlight: function(element) {
			    $(element).closest('.control-group').removeClass('success').addClass('error');
			},
			success: function(element) {
			    element
			    .text('OK!').addClass('valid')
			    .closest('.control-group').removeClass('error').addClass('success');
			}
		});

		$("#mytable").tablesorter(); 

		//array storing individual team arrays.
		var league_array = [];
		var row_counter = 0;

		$('#createTeam').click(function () {
			//array storing individual team attributes on click event	
			var team_array = [];
			// increments counter used to assign appended row id's
			row_counter++;
		   
			$(".team_inputs").each(function() { //loops through form inputs...
			   	team_array.push($(this).val()); //...pushing values into team_array.
			});

			// team_array.push (0, 0); //pushes 0's into w/l slots in array
			team_array.push (3, 5);
			   
			//pushes team array into league array...
			league_array.push(team_array);
			//hide modal on submit...
			$('#create_team').modal('hide');

			//clears form fields on submit/close.
    		$(this).closest('form').find("input[type=text], textarea").val("");

    		//variables used in calculating & displaying win %
    		var raw_per, per_array, win_per;
    		//calculates win percentage to 3 decimal places
    		raw_per = (team_array[6]/(team_array[6] + team_array[7])).toFixed(3); 

<<<<<<< HEAD
    		if (raw_per < 1) { //if number is less than 1, omit the pre-decimal 0 when displayed.
    			per_array = raw_per.split('.');
    			win_per = "." + per_array[1];
    		}

    		else { //if number is 1.000, display full number.
    			win_per = raw_per;
    		};
    		//appends table row on submit. Contains popover content.
    		$('<tr id="row' + row_counter + '"><td><a rel="popover" data-toggle="popover" title="<h4 style=\'text-align: center;\'>' + team_array[0] + '</h4>"  data-content="<table id=\'contact_pop\'><tr><td>Mgr. First Name:</td><td>' + team_array[1] + '</td></tr><tr><td>Mgr. Last Name:</td><td>' + team_array[2] + '</td></tr><tr><td>Phone Number:</td><td>' + team_array[3] + '</td></tr><tr><td>Team Sponsor:</td><td>' + team_array[4] + '</td></tr><tr><td>Zip:</td><td>' + team_array[5] +'</td></tr></table>">' + team_array[0] + '</a></td><td>' + team_array[6] + '</td><td>' + team_array[7] + '</td><td>' + win_per + '</td></tr>').appendTo('#standings');




			//resets form validation on opening.   
			validate.resetForm(); 
			$('.control-group').removeClass('success error');

			// let the plugin know that we made a update 
	        $("#mytable").trigger("update"); 
	        // set sorting column and direction, this will sort on the first and third column 
	        var sorting = [[3,0]]; 
	        // sort on the first column 
	        $("#mytable").trigger("sorton",[sorting]); 
	        return false; 
		}); //end submit click function

=======
    		   $('<tr><td><a rel="popover" data-toggle="popover" title="<h4 style=\'text-align: center;\'>' + team_array[0] + '</h4>"  data-content="<table id=\'contact_pop\'><tr><td>Mgr. First Name:</td><td>' + team_array[1] + '</td></tr><tr><td>Mgr. Last Name:</td><td>' + team_array[2] + '</td></tr><tr><td>Phone Number:</td><td>' + team_array[3] + '</td></tr><tr><td>Team Sponsor:</td><td>' + team_array[4] + '</td></tr><tr><td>Zip:</td><td>' + team_array[5] +'</td></tr></table>">' + team_array[0] + '</a></td><td>' + team_array[6] + '</td><td>' + team_array[7] + '</td><td>' + win_per + '</td></tr>').appendTo('#standings');		     

			  //implement team limit constraint within conditional
			  if (league_array.length === 8) {
				  $('#create_team_button').click(function() {
				  $('.alert').show();
				  return false;
				  });
			  };

		});

>>>>>>> 15c78c3394511a1f7641e8e8254223446e7282b5
		
<<<<<<< HEAD
	}); //end doc ready
	</script>
	<!-- pdeudo code tasklist:
	A) if array length = 8, sorry, full, else, team form. -->
=======
	});

	</script>
>>>>>>> 15c78c3394511a1f7641e8e8254223446e7282b5

</head>
<body>
	<div class="container">
		<div class="row-fluid" style="text-align: center;">
			<h1>Beer League Standings</h1>
		</div>
		<div class="row-fluid">
			<table id="mytable" class="tablesorter span10 offset1" cellspacing="1">
				<thead>
					<tr><th>Team</th><th>Wins</th><th>Losses</th><th>Win %</th></tr>
				</thead>
				<tbody id="standings">
				</tbody>
			</table>
		</div> <!-- end table row -->
<div class="row-fluid">
	<a href="#myModal" type="button" id="create_team_button" role="button" class="btn offset1 top_bump" data-target="#create_team" data-toggle="modal">Create New Team</a>	
	<button id="test" type="submit" class="btn top_bump" onclick="return false">test</button>
</div> <!-- end button row -->
	<div id="create_team" class="modal hide fade">
		<div class="modal-header">
		    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		    <h3>Contact Form</h3>
		</div>
		<div class="modal-body">
			<form id="modal_form" class="form-horizontal" style="margin-top: 20px;">
			  <div class="control-group">
			    <label class="control-label" for="teamName">Team Name</label>
			    <div class="controls">
			      <input type="text" class="team_inputs" id="teamName" name="teamName" placeholder="Da Bears">
			    </div>
			  </div>
			  <div class="control-group">
			    <label class="control-label" for="mgr_fname">Manager's First Name</label>
			    <div class="controls">
			      <input type="text" class="team_inputs" id="mgr_fname" name="mgr_fname" placeholder="Ex: Jimbo" >
			    </div>
			  </div>
			  <div class="control-group">
			    <label class="control-label" for="mgr_lname">Manager's Last Name</label>
			    <div class="controls">
			      <input type="text" class="team_inputs" id="mgr_lname" name="mgr_lname" placeholder="Ex: Jones">
			    </div>
			  </div>
			  <div class="control-group">
			    <label class="control-label" for="phone">Phone Number</label>
			    <div class="controls">
			      <input type="text" id="phone" class="team_inputs" name="phone" placeholder="Ex: 1234567890">
			    </div>
			  </div>
			  <div class="control-group">
			    <label class="control-label" for="sponsor">Team Sponsor</label>
			    <div class="controls">
			      <input type="text" class="team_inputs" id="sponsor" name="sponsor" placeholder="Ex: Adidas">
			    </div>
			  </div>
			  <div class="control-group">
			    <label class="control-label" for="zip">Zip Code</label>
			    <div class="controls">
			      <input type="text" class="team_inputs" id="zip" name="zip" placeholder="Ex: 12345" >
			    </div>
			  </div>
			  <div class="control-group">
			    <div class="controls">
			      <button id="createTeam" type="submit" class="btn" onclick="return false">Submit</button>
			    </div>
			  </div>
			</form>
		</div>
	</div>	
<!-- <button id="test" type="submit" class="btn" onclick="return false">test</button> -->
<div id="value">
</div>
<script type="text/javascript">

	$('body').popover({
 		selector: '[rel=popover]',
  		html:  true,
  	    trigger: 'hover',
  	    placement: 'bottom'
  	});

</script>

<div class="alert">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  <strong>Sorry!</strong> The team limit has been reached.
</div>

</body>
</html>